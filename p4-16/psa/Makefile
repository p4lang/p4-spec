
SPEC=PSA
CHARTER=P4_Arch_Charter

all: build/${SPEC}.pdf build/${CHARTER}.pdf

build/${SPEC}.pdf: ${SPEC}.mdk
	madoko --pdf -vv --odir=build $<

build/${CHARTER}.pdf: charter/${CHARTER}.mdk
	madoko -vv --odir=build $<

build/${SPEC}.pdf: p4.json
build/${SPEC}.pdf: psa.p4

clean:
	${RM} -rf build

P4C=p4test

check:
	${P4C} examples/psa-example-counters.p4
	${P4C} examples/psa-example-value-sets.p4
	${P4C} examples/psa-example-value-sets2.p4
	${P4C} examples/psa-example-value-sets3.p4
	${P4C} examples/psa-example-register2.p4
	${P4C} examples/psa-example-parser-checksum.p4
	${P4C} examples/psa-example-incremental-checksum.p4
	${P4C} examples/psa-example-clone-to-port.p4
